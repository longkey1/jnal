<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Title }}</title>
    <style>
    nav { position: sticky; top: 0; background: inherit; padding: 10px 0; z-index: 100; }
    nav a { margin-right: 15px; }
    </style>
    <style>{{ .CSS }}</style>
</head>
<body>
    <h1>{{ .Title }}</h1>

    {{ if eq (len .Entries) 0 }}
    <p>No journal entries found.</p>
    {{ else }}
    <nav>
        {{ range .YearNavs }}
        <a href="#{{ .Year }}">{{ .Year }}</a>
        {{ end }}
    </nav>

    {{ range .Entries }}
    {{ if .ShowYear }}<h2 id="{{ .YearLabel }}">{{ .YearLabel }}</h2>{{ end }}
    {{ if .ShowMonth }}<h3 id="{{ .MonthLabel }}">{{ .MonthLabel }}</h3>{{ end }}
    <article id="{{ .Date.Format "2006-01-02" }}">
        <h4>{{ .Date.Format "2006-01-02" }}</h4>
        <div class="content">
            {{ .Content }}
        </div>
    </article>
    {{ end }}
    {{ end }}

    {{ if .LiveReload }}
    <script>
    (function() {
        const es = new EventSource('/events');
        es.onmessage = function(e) {
            if (e.data === 'reload') {
                location.reload();
            }
        };
        es.onerror = function() {
            console.log('SSE connection lost, reconnecting...');
        };
    })();
    </script>
    {{ end }}
</body>
</html>
